{"version":3,"sources":["switch.js"],"names":[],"mappings":"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","file":"src/directives/switch.js","sourceRoot":"/Users/yamaguchi/Desktop/mean-edge/node_modules/angular2/es6/dev/","sourcesContent":["import {Directive} from 'angular2/src/core/annotations_impl/annotations';\nimport {ViewContainerRef} from 'angular2/src/core/compiler/view_container_ref';\nimport {ProtoViewRef} from 'angular2/src/core/compiler/view_ref';\nimport {isPresent,\n  isBlank,\n  normalizeBlank} from 'angular2/src/facade/lang';\nimport {ListWrapper,\n  List,\n  MapWrapper,\n  Map} from 'angular2/src/facade/collection';\nimport {Parent} from 'angular2/src/core/annotations_impl/visibility';\nclass SwitchView {\n  constructor(viewContainerRef, protoViewRef) {\n    this._protoViewRef = protoViewRef;\n    this._viewContainerRef = viewContainerRef;\n  }\n  create() {\n    this._viewContainerRef.create(this._protoViewRef);\n  }\n  destroy() {\n    this._viewContainerRef.clear();\n  }\n}\nObject.defineProperty(SwitchView, \"parameters\", {get: function() {\n    return [[ViewContainerRef], [ProtoViewRef]];\n  }});\nexport class Switch {\n  constructor() {\n    this._valueViews = MapWrapper.create();\n    this._activeViews = ListWrapper.create();\n    this._useDefault = false;\n  }\n  set value(value) {\n    this._emptyAllActiveViews();\n    this._useDefault = false;\n    var views = MapWrapper.get(this._valueViews, value);\n    if (isBlank(views)) {\n      this._useDefault = true;\n      views = normalizeBlank(MapWrapper.get(this._valueViews, _whenDefault));\n    }\n    this._activateViews(views);\n    this._switchValue = value;\n  }\n  _onWhenValueChanged(oldWhen, newWhen, view) {\n    this._deregisterView(oldWhen, view);\n    this._registerView(newWhen, view);\n    if (oldWhen === this._switchValue) {\n      view.destroy();\n      ListWrapper.remove(this._activeViews, view);\n    } else if (newWhen === this._switchValue) {\n      if (this._useDefault) {\n        this._useDefault = false;\n        this._emptyAllActiveViews();\n      }\n      view.create();\n      ListWrapper.push(this._activeViews, view);\n    }\n    if (this._activeViews.length === 0 && !this._useDefault) {\n      this._useDefault = true;\n      this._activateViews(MapWrapper.get(this._valueViews, _whenDefault));\n    }\n  }\n  _emptyAllActiveViews() {\n    var activeContainers = this._activeViews;\n    for (var i = 0; i < activeContainers.length; i++) {\n      activeContainers[i].destroy();\n    }\n    this._activeViews = ListWrapper.create();\n  }\n  _activateViews(views) {\n    if (isPresent(views)) {\n      for (var i = 0; i < views.length; i++) {\n        views[i].create();\n      }\n      this._activeViews = views;\n    }\n  }\n  _registerView(value, view) {\n    var views = MapWrapper.get(this._valueViews, value);\n    if (isBlank(views)) {\n      views = ListWrapper.create();\n      MapWrapper.set(this._valueViews, value, views);\n    }\n    ListWrapper.push(views, view);\n  }\n  _deregisterView(value, view) {\n    if (value == _whenDefault)\n      return ;\n    var views = MapWrapper.get(this._valueViews, value);\n    if (views.length == 1) {\n      MapWrapper.delete(this._valueViews, value);\n    } else {\n      ListWrapper.remove(views, view);\n    }\n  }\n}\nObject.defineProperty(Switch, \"annotations\", {get: function() {\n    return [new Directive({\n      selector: '[switch]',\n      properties: {'value': 'switch'}\n    })];\n  }});\nObject.defineProperty(Switch.prototype._onWhenValueChanged, \"parameters\", {get: function() {\n    return [[], [], [SwitchView]];\n  }});\nObject.defineProperty(Switch.prototype._activateViews, \"parameters\", {get: function() {\n    return [[assert.genericType(List, SwitchView)]];\n  }});\nObject.defineProperty(Switch.prototype._registerView, \"parameters\", {get: function() {\n    return [[], [SwitchView]];\n  }});\nObject.defineProperty(Switch.prototype._deregisterView, \"parameters\", {get: function() {\n    return [[], [SwitchView]];\n  }});\nexport class SwitchWhen {\n  constructor(viewContainer, protoViewRef, sswitch) {\n    this._value = _whenDefault;\n    this._switch = sswitch;\n    this._view = new SwitchView(viewContainer, protoViewRef);\n  }\n  onDestroy() {\n    this._switch;\n  }\n  set when(value) {\n    this._switch._onWhenValueChanged(this._value, value, this._view);\n    this._value = value;\n  }\n}\nObject.defineProperty(SwitchWhen, \"annotations\", {get: function() {\n    return [new Directive({\n      selector: '[switch-when]',\n      properties: {'when': 'switch-when'}\n    })];\n  }});\nObject.defineProperty(SwitchWhen, \"parameters\", {get: function() {\n    return [[ViewContainerRef], [ProtoViewRef], [Switch, new Parent()]];\n  }});\nexport class SwitchDefault {\n  constructor(viewContainer, protoViewRef, sswitch) {\n    sswitch._registerView(_whenDefault, new SwitchView(viewContainer, protoViewRef));\n  }\n}\nObject.defineProperty(SwitchDefault, \"annotations\", {get: function() {\n    return [new Directive({selector: '[switch-default]'})];\n  }});\nObject.defineProperty(SwitchDefault, \"parameters\", {get: function() {\n    return [[ViewContainerRef], [ProtoViewRef], [Switch, new Parent()]];\n  }});\nvar _whenDefault = new Object();\n//# sourceMappingURL=switch.js.map\n\n//# sourceMappingURL=./switch.map"]}