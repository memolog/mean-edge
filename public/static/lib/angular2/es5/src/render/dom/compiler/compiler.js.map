{"version":3,"sources":["compiler.js"],"names":[],"mappings":"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","file":"src/render/dom/compiler/compiler.js","sourceRoot":"/Users/yamaguchi/Desktop/mean-edge/node_modules/angular2/es6/dev/","sourcesContent":["import {Injectable} from 'angular2/src/di/annotations_impl';\nimport {PromiseWrapper,\n  Promise} from 'angular2/src/facade/async';\nimport {BaseException,\n  isPresent} from 'angular2/src/facade/lang';\nimport {DOM} from 'angular2/src/dom/dom_adapter';\nimport {ViewDefinition,\n  ProtoViewDto,\n  DirectiveMetadata,\n  RenderCompiler,\n  RenderProtoViewRef} from '../../api';\nimport {CompilePipeline} from './compile_pipeline';\nimport {TemplateLoader} from 'angular2/src/render/dom/compiler/template_loader';\nimport {CompileStepFactory,\n  DefaultStepFactory} from './compile_step_factory';\nimport {Parser} from 'angular2/change_detection';\nimport {ShadowDomStrategy} from '../shadow_dom/shadow_dom_strategy';\nexport class DomCompiler extends RenderCompiler {\n  constructor(stepFactory, templateLoader) {\n    super();\n    this._templateLoader = templateLoader;\n    this._stepFactory = stepFactory;\n  }\n  compile(template) {\n    var tplPromise = this._templateLoader.load(template);\n    return PromiseWrapper.then(tplPromise, (el) => this._compileTemplate(template, el), (_) => {\n      throw new BaseException(`Failed to load the template \"${template.componentId}\"`);\n    });\n  }\n  compileHost(directiveMetadata) {\n    var hostViewDef = new ViewDefinition({\n      componentId: directiveMetadata.id,\n      absUrl: null,\n      template: null,\n      directives: [directiveMetadata]\n    });\n    var element = DOM.createElement(directiveMetadata.selector);\n    return this._compileTemplate(hostViewDef, element);\n  }\n  _compileTemplate(viewDef, tplElement) {\n    var subTaskPromises = [];\n    var pipeline = new CompilePipeline(this._stepFactory.createSteps(viewDef, subTaskPromises));\n    var compileElements = pipeline.process(tplElement, viewDef.componentId);\n    var protoView = compileElements[0].inheritedProtoView.build();\n    if (subTaskPromises.length > 0) {\n      return PromiseWrapper.all(subTaskPromises).then((_) => protoView);\n    } else {\n      return PromiseWrapper.resolve(protoView);\n    }\n  }\n}\nObject.defineProperty(DomCompiler, \"parameters\", {get: function() {\n    return [[CompileStepFactory], [TemplateLoader]];\n  }});\nObject.defineProperty(DomCompiler.prototype.compile, \"parameters\", {get: function() {\n    return [[ViewDefinition]];\n  }});\nObject.defineProperty(DomCompiler.prototype.compileHost, \"parameters\", {get: function() {\n    return [[DirectiveMetadata]];\n  }});\nObject.defineProperty(DomCompiler.prototype._compileTemplate, \"parameters\", {get: function() {\n    return [[ViewDefinition], []];\n  }});\nexport class DefaultDomCompiler extends DomCompiler {\n  constructor(parser, shadowDomStrategy, templateLoader) {\n    super(new DefaultStepFactory(parser, shadowDomStrategy), templateLoader);\n  }\n}\nObject.defineProperty(DefaultDomCompiler, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(DefaultDomCompiler, \"parameters\", {get: function() {\n    return [[Parser], [ShadowDomStrategy], [TemplateLoader]];\n  }});\n//# sourceMappingURL=compiler.js.map\n\n//# sourceMappingURL=./compiler.map"]}