{"version":3,"sources":["proto_view_factory.js"],"names":[],"mappings":"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","file":"src/core/compiler/proto_view_factory.js","sourceRoot":"/Users/yamaguchi/Desktop/mean-edge/node_modules/angular2/es6/dev/","sourcesContent":["import {Injectable} from 'angular2/src/di/annotations_impl';\nimport {List,\n  ListWrapper,\n  MapWrapper} from 'angular2/src/facade/collection';\nimport {isPresent,\n  isBlank} from 'angular2/src/facade/lang';\nimport {reflector} from 'angular2/src/reflection/reflection';\nimport {ChangeDetection,\n  DirectiveIndex,\n  BindingRecord,\n  DirectiveRecord,\n  ProtoChangeDetector} from 'angular2/change_detection';\nimport {Component} from '../annotations_impl/annotations';\nimport * as renderApi from 'angular2/src/render/api';\nimport {AppProtoView} from './view';\nimport {ProtoElementInjector,\n  DirectiveBinding} from './element_injector';\nclass BindingRecordsCreator {\n  constructor() {\n    this._directiveRecordsMap = MapWrapper.create();\n    this._textNodeIndex = 0;\n  }\n  getBindingRecords(elementBinders, sortedDirectives) {\n    var bindings = [];\n    for (var boundElementIndex = 0; boundElementIndex < elementBinders.length; boundElementIndex++) {\n      var renderElementBinder = elementBinders[boundElementIndex];\n      bindings = ListWrapper.concat(bindings, this._createTextNodeRecords(renderElementBinder));\n      bindings = ListWrapper.concat(bindings, this._createElementPropertyRecords(boundElementIndex, renderElementBinder));\n      bindings = ListWrapper.concat(bindings, this._createDirectiveRecords(boundElementIndex, sortedDirectives[boundElementIndex]));\n    }\n    return bindings;\n  }\n  getDirectiveRecords(sortedDirectives) {\n    var directiveRecords = [];\n    for (var elementIndex = 0; elementIndex < sortedDirectives.length; ++elementIndex) {\n      var dirs = sortedDirectives[elementIndex].directives;\n      for (var dirIndex = 0; dirIndex < dirs.length; ++dirIndex) {\n        ListWrapper.push(directiveRecords, this._getDirectiveRecord(elementIndex, dirIndex, dirs[dirIndex]));\n      }\n    }\n    return directiveRecords;\n  }\n  _createTextNodeRecords(renderElementBinder) {\n    if (isBlank(renderElementBinder.textBindings))\n      return [];\n    return ListWrapper.map(renderElementBinder.textBindings, (b) => BindingRecord.createForTextNode(b, this._textNodeIndex++));\n  }\n  _createElementPropertyRecords(boundElementIndex, renderElementBinder) {\n    var res = [];\n    MapWrapper.forEach(renderElementBinder.propertyBindings, (astWithSource, propertyName) => {\n      ListWrapper.push(res, BindingRecord.createForElement(astWithSource, boundElementIndex, propertyName));\n    });\n    return res;\n  }\n  _createDirectiveRecords(boundElementIndex, sortedDirectives) {\n    var res = [];\n    for (var i = 0; i < sortedDirectives.renderDirectives.length; i++) {\n      var directiveBinder = sortedDirectives.renderDirectives[i];\n      MapWrapper.forEach(directiveBinder.propertyBindings, (astWithSource, propertyName) => {\n        var setter = reflector.setter(propertyName);\n        var directiveRecord = this._getDirectiveRecord(boundElementIndex, i, sortedDirectives.directives[i]);\n        var b = BindingRecord.createForDirective(astWithSource, propertyName, setter, directiveRecord);\n        ListWrapper.push(res, b);\n      });\n      MapWrapper.forEach(directiveBinder.hostPropertyBindings, (astWithSource, propertyName) => {\n        var dirIndex = new DirectiveIndex(boundElementIndex, i);\n        var b = BindingRecord.createForHostProperty(dirIndex, astWithSource, propertyName);\n        ListWrapper.push(res, b);\n      });\n    }\n    return res;\n  }\n  _getDirectiveRecord(boundElementIndex, directiveIndex, binding) {\n    var id = boundElementIndex * 100 + directiveIndex;\n    if (!MapWrapper.contains(this._directiveRecordsMap, id)) {\n      var changeDetection = binding.changeDetection;\n      MapWrapper.set(this._directiveRecordsMap, id, new DirectiveRecord(new DirectiveIndex(boundElementIndex, directiveIndex), binding.callOnAllChangesDone, binding.callOnChange, changeDetection));\n    }\n    return MapWrapper.get(this._directiveRecordsMap, id);\n  }\n}\nObject.defineProperty(BindingRecordsCreator.prototype.getBindingRecords, \"parameters\", {get: function() {\n    return [[assert.genericType(List, renderApi.ElementBinder)], [assert.genericType(List, SortedDirectives)]];\n  }});\nObject.defineProperty(BindingRecordsCreator.prototype.getDirectiveRecords, \"parameters\", {get: function() {\n    return [[assert.genericType(List, SortedDirectives)]];\n  }});\nObject.defineProperty(BindingRecordsCreator.prototype._createTextNodeRecords, \"parameters\", {get: function() {\n    return [[renderApi.ElementBinder]];\n  }});\nObject.defineProperty(BindingRecordsCreator.prototype._createElementPropertyRecords, \"parameters\", {get: function() {\n    return [[assert.type.number], [renderApi.ElementBinder]];\n  }});\nObject.defineProperty(BindingRecordsCreator.prototype._createDirectiveRecords, \"parameters\", {get: function() {\n    return [[assert.type.number], [SortedDirectives]];\n  }});\nObject.defineProperty(BindingRecordsCreator.prototype._getDirectiveRecord, \"parameters\", {get: function() {\n    return [[assert.type.number], [assert.type.number], [DirectiveBinding]];\n  }});\nexport class ProtoViewFactory {\n  constructor(changeDetection) {\n    this._changeDetection = changeDetection;\n  }\n  createProtoView(parentProtoView, componentBinding, renderProtoView, directives) {\n    var elementBinders = renderProtoView.elementBinders;\n    var sortedDirectives = ListWrapper.map(elementBinders, (b) => new SortedDirectives(b.directives, directives));\n    var variableBindings = this._createVariableBindings(renderProtoView);\n    var protoLocals = this._createProtoLocals(variableBindings);\n    var variableNames = this._createVariableNames(parentProtoView, protoLocals);\n    var protoChangeDetector = this._createProtoChangeDetector(elementBinders, sortedDirectives, componentBinding, variableNames);\n    var protoView = new AppProtoView(renderProtoView.render, protoChangeDetector, variableBindings, protoLocals, variableNames);\n    this._createElementBinders(protoView, elementBinders, sortedDirectives);\n    this._bindDirectiveEvents(protoView, sortedDirectives);\n    return protoView;\n  }\n  _createProtoLocals(varBindings) {\n    var protoLocals = MapWrapper.create();\n    MapWrapper.forEach(varBindings, (mappedName, varName) => {\n      MapWrapper.set(protoLocals, mappedName, null);\n    });\n    return protoLocals;\n  }\n  _createVariableBindings(renderProtoView) {\n    var variableBindings = MapWrapper.create();\n    MapWrapper.forEach(renderProtoView.variableBindings, (mappedName, varName) => {\n      MapWrapper.set(variableBindings, varName, mappedName);\n    });\n    ListWrapper.forEach(renderProtoView.elementBinders, (binder) => {\n      MapWrapper.forEach(binder.variableBindings, (mappedName, varName) => {\n        MapWrapper.set(variableBindings, varName, mappedName);\n      });\n    });\n    return variableBindings;\n  }\n  _createVariableNames(parentProtoView, protoLocals) {\n    var variableNames = isPresent(parentProtoView) ? ListWrapper.clone(parentProtoView.variableNames) : [];\n    MapWrapper.forEach(protoLocals, (v, local) => {\n      ListWrapper.push(variableNames, local);\n    });\n    return variableNames;\n  }\n  _createProtoChangeDetector(elementBinders, sortedDirectives, componentBinding, variableNames) {\n    var bindingRecordsCreator = new BindingRecordsCreator();\n    var bindingRecords = bindingRecordsCreator.getBindingRecords(elementBinders, sortedDirectives);\n    var directiveRecords = bindingRecordsCreator.getDirectiveRecords(sortedDirectives);\n    var changeDetection = null;\n    var name = 'root';\n    if (isPresent(componentBinding)) {\n      var componentAnnotation = componentBinding.annotation;\n      changeDetection = componentAnnotation.changeDetection;\n      name = 'dummy';\n    }\n    return this._changeDetection.createProtoChangeDetector(name, bindingRecords, variableNames, directiveRecords, changeDetection);\n  }\n  _createElementBinders(protoView, elementBinders, sortedDirectives) {\n    for (var i = 0; i < elementBinders.length; i++) {\n      var renderElementBinder = elementBinders[i];\n      var dirs = sortedDirectives[i];\n      var parentPeiWithDistance = this._findParentProtoElementInjectorWithDistance(i, protoView.elementBinders, elementBinders);\n      var protoElementInjector = this._createProtoElementInjector(i, parentPeiWithDistance, dirs, renderElementBinder);\n      this._createElementBinder(protoView, i, renderElementBinder, protoElementInjector, dirs);\n    }\n  }\n  _findParentProtoElementInjectorWithDistance(binderIndex, elementBinders, renderElementBinders) {\n    var distance = 0;\n    do {\n      var renderElementBinder = renderElementBinders[binderIndex];\n      binderIndex = renderElementBinder.parentIndex;\n      if (binderIndex !== -1) {\n        distance += renderElementBinder.distanceToParent;\n        var elementBinder = elementBinders[binderIndex];\n        if (isPresent(elementBinder.protoElementInjector)) {\n          return new ParentProtoElementInjectorWithDistance(elementBinder.protoElementInjector, distance);\n        }\n      }\n    } while (binderIndex !== -1);\n    return new ParentProtoElementInjectorWithDistance(null, -1);\n  }\n  _createProtoElementInjector(binderIndex, parentPeiWithDistance, sortedDirectives, renderElementBinder) {\n    var protoElementInjector = null;\n    var hasVariables = MapWrapper.size(renderElementBinder.variableBindings) > 0;\n    if (sortedDirectives.directives.length > 0 || hasVariables) {\n      protoElementInjector = new ProtoElementInjector(parentPeiWithDistance.protoElementInjector, binderIndex, sortedDirectives.directives, isPresent(sortedDirectives.componentDirective), parentPeiWithDistance.distance);\n      protoElementInjector.attributes = renderElementBinder.readAttributes;\n      if (hasVariables) {\n        protoElementInjector.exportComponent = isPresent(sortedDirectives.componentDirective);\n        protoElementInjector.exportElement = isBlank(sortedDirectives.componentDirective);\n        var exportImplicitName = MapWrapper.get(renderElementBinder.variableBindings, '\\$implicit');\n        if (isPresent(exportImplicitName)) {\n          protoElementInjector.exportImplicitName = exportImplicitName;\n        }\n      }\n    }\n    return protoElementInjector;\n  }\n  _createElementBinder(protoView, boundElementIndex, renderElementBinder, protoElementInjector, sortedDirectives) {\n    var parent = null;\n    if (renderElementBinder.parentIndex !== -1) {\n      parent = protoView.elementBinders[renderElementBinder.parentIndex];\n    }\n    var elBinder = protoView.bindElement(parent, renderElementBinder.distanceToParent, protoElementInjector, sortedDirectives.componentDirective);\n    protoView.bindEvent(renderElementBinder.eventBindings, boundElementIndex, -1);\n    MapWrapper.forEach(renderElementBinder.variableBindings, (mappedName, varName) => {\n      MapWrapper.set(protoView.protoLocals, mappedName, null);\n    });\n    return elBinder;\n  }\n  _bindDirectiveEvents(protoView, sortedDirectives) {\n    for (var boundElementIndex = 0; boundElementIndex < sortedDirectives.length; ++boundElementIndex) {\n      var dirs = sortedDirectives[boundElementIndex].renderDirectives;\n      for (var i = 0; i < dirs.length; i++) {\n        var directiveBinder = dirs[i];\n        protoView.bindEvent(directiveBinder.eventBindings, boundElementIndex, i);\n      }\n    }\n  }\n}\nObject.defineProperty(ProtoViewFactory, \"annotations\", {get: function() {\n    return [new Injectable()];\n  }});\nObject.defineProperty(ProtoViewFactory, \"parameters\", {get: function() {\n    return [[ChangeDetection]];\n  }});\nObject.defineProperty(ProtoViewFactory.prototype.createProtoView, \"parameters\", {get: function() {\n    return [[AppProtoView], [DirectiveBinding], [renderApi.ProtoViewDto], [assert.genericType(List, DirectiveBinding)]];\n  }});\nObject.defineProperty(ProtoViewFactory.prototype._createProtoLocals, \"parameters\", {get: function() {\n    return [[Map]];\n  }});\nObject.defineProperty(ProtoViewFactory.prototype._bindDirectiveEvents, \"parameters\", {get: function() {\n    return [[], [assert.genericType(List, SortedDirectives)]];\n  }});\nclass SortedDirectives {\n  constructor(renderDirectives, allDirectives) {\n    this.renderDirectives = [];\n    this.directives = [];\n    this.componentDirective = null;\n    ListWrapper.forEach(renderDirectives, (renderDirectiveBinder) => {\n      var directiveBinding = allDirectives[renderDirectiveBinder.directiveIndex];\n      if (directiveBinding.annotation instanceof Component) {\n        this.componentDirective = directiveBinding;\n        ListWrapper.insert(this.renderDirectives, 0, renderDirectiveBinder);\n        ListWrapper.insert(this.directives, 0, directiveBinding);\n      } else {\n        ListWrapper.push(this.renderDirectives, renderDirectiveBinder);\n        ListWrapper.push(this.directives, directiveBinding);\n      }\n    });\n  }\n}\nclass ParentProtoElementInjectorWithDistance {\n  constructor(protoElementInjector, distance) {\n    this.protoElementInjector = protoElementInjector;\n    this.distance = distance;\n  }\n}\nObject.defineProperty(ParentProtoElementInjectorWithDistance, \"parameters\", {get: function() {\n    return [[ProtoElementInjector], [assert.type.number]];\n  }});\n//# sourceMappingURL=proto_view_factory.js.map\n\n//# sourceMappingURL=./proto_view_factory.map"]}