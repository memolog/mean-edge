{"version":3,"sources":["dynamic_change_detector.js"],"names":[],"mappings":"AAAA,KAAK,SAAS,AAAC,2JAAoB,UAAS,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;AA2PpD,SAAS,OAAK,CAAE,CAAA,CAAG,CAAA,CAAA,CAAG;AAClB,OAAI,CAAA,IAAM,EAAA;AACN,WAAO,KAAG,CAAC;AAAA,AACf,OAAI,CAAA,WAAa,OAAK,CAAA,EAAK,CAAA,CAAA,WAAa,OAAK,CAAA,EAAK,CAAA,CAAA,GAAK,EAAA;AACnD,WAAO,KAAG,CAAC;AAAA,AACf,OAAI,CAAC,CAAA,IAAM,EAAA,CAAC,GAAK,EAAC,CAAA,IAAM,EAAA,CAAC;AACrB,WAAO,KAAG,CAAC;AAAA,AACf,SAAO,MAAI,CAAC;EAChB;AAnQA,AAmQA,OAnQO;AACD,UAAM,GADZ,SAAS,IAAG;AAAZ,gBAAoB,KAAG,UAAkB,CAAC;AAA1C,cAAoB,KAAG,QAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;AAA1C,sBAAoB,KAAG,gBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,kBAAoB,KAAG,YAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,6BAAoB,KAAG,uBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,0BAAoB,KAAG,oBAAkB,CAAC;AAA1C,oBAAoB,KAAG,cAAkB,CAAC;IAElC,CAFR,UAAS,IAAG;AAAZ,uBAAoB,KAAG,iBAAkB,CAAC;AAA1C,2BAAoB,KAAG,qBAAkB,CAAC;AAA1C,wBAAoB,KAAG,kBAAkB,CAAC;AAA1C,gCAAoB,KAAG,0BAAkB,CAAC;AAA1C,wBAAoB,KAAG,kBAAkB,CAAC;AAA1C,iCAAoB,KAAG,2BAAkB,CAAC;AAA1C,+BAAoB,KAAG,yBAAkB,CAAC;AAA1C,+BAAoB,KAAG,yBAAkB,CAAC;AAA1C,uBAAoB,KAAG,iBAAkB,CAAC;AAA1C,+BAAoB,KAAG,yBAAkB,CAAC;AAA1C,8BAAoB,KAAG,wBAAkB,CAAC;IAElC,CAFR,UAAS,IAAG,CAAG;AAAf,2BAAoB,KAAG,qBAAkB,CAAC;IAElC,CADuB;AACzB,UAAM;iBAOY,KAAG;AAT3B,cAAQ,AAAC,0BAAqC,CAAA;AAA9C,8BAAA,SAAS,QAAO;AAUT,eAAM,sBAAoB,CACjB,qBAAoB,CAAG,CAAA,UAAS,CAAG,CAAA,YAAW,CAAG,CAAA,MAAK,CAAG,CAAA,gBAAe,CAAG;AAX3F,AAYQ,wBAZM,iBAAiB,AAAC,uBAAkB,KAAK,MAAmB,CAY3D;AACP,aAAG,sBAAsB,EAAI,sBAAoB,CAAC;AAClD,aAAG,WAAW,EAAI,WAAS,CAAC;AAC5B,aAAG,aAAa,EAAI,aAAW,CAAC;AAChC,aAAG,OAAO,EAAI,OAAK,CAAC;AACpB,aAAG,iBAAiB,EAAI,iBAAe,CAAC;AACxC,aAAG,OAAO,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,MAAK,OAAO,EAAI,EAAA,CAAC,CAAC;AAC5D,aAAG,MAAM,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,MAAK,OAAO,EAAI,EAAA,CAAC,CAAC;AAC3D,aAAG,aAAa,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,MAAK,OAAO,EAAI,EAAA,CAAC,CAAC;AAClE,aAAG,QAAQ,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,MAAK,OAAO,EAAI,EAAA,CAAC,CAAC;AAC7D,oBAAU,KAAK,AAAC,CAAC,IAAG,OAAO,CAAG,cAAY,CAAC,CAAC;AAC5C,oBAAU,KAAK,AAAC,CAAC,IAAG,MAAM,CAAG,KAAG,CAAC,CAAC;AAClC,oBAAU,KAAK,AAAC,CAAC,IAAG,aAAa,CAAG,cAAY,CAAC,CAAC;AAClD,oBAAU,KAAK,AAAC,CAAC,IAAG,QAAQ,CAAG,MAAI,CAAC,CAAC;AACrC,aAAG,OAAO,EAAI,KAAG,CAAC;AAClB,aAAG,WAAW,EAAI,KAAG,CAAC;QAC1B;AA1BM,AAwPV,aAxPiB,CAAA,CAAC,eAAc,YAAY,CAAC,AAAC;AA2B1C,gBAAM,CAAN,UAAQ,OAAM,CAAG,CAAA,MAAK,CAAG,CAAA,UAAS,CAAG;AACjC,eAAG,KAAK,EAAI,CAAA,mBAAkB,oBAAoB,AAAC,CAAC,IAAG,sBAAsB,CAAC,CAAC;AAC/E,eAAG,OAAO,CAAE,CAAA,CAAC,EAAI,QAAM,CAAC;AACxB,eAAG,OAAO,EAAI,OAAK,CAAC;AACpB,eAAG,WAAW,EAAI,WAAS,CAAC;UAChC;AACA,kBAAQ,CAAR,UAAS,AAAC,CAAE;AACR,eAAG,cAAc,AAAC,EAAC,CAAC;AACpB,sBAAU,KAAK,AAAC,CAAC,IAAG,OAAO,CAAG,cAAY,CAAC,CAAC;AAC5C,sBAAU,KAAK,AAAC,CAAC,IAAG,QAAQ,CAAG,MAAI,CAAC,CAAC;AACrC,sBAAU,KAAK,AAAC,CAAC,IAAG,MAAM,CAAG,KAAG,CAAC,CAAC;AAClC,sBAAU,KAAK,AAAC,CAAC,IAAG,aAAa,CAAG,cAAY,CAAC,CAAC;AAClD,eAAG,OAAO,EAAI,KAAG,CAAC;UACtB;AACA,sBAAY,CAAZ,UAAa,AAAC,CAAE;AACZ,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,MAAM,OAAO,CAAG,GAAE,CAAA,CAAG;AACxC,iBAAI,SAAQ,AAAC,CAAC,IAAG,MAAM,CAAE,CAAA,CAAC,CAAC,CAAG;AAC1B,mBAAG,MAAM,CAAE,CAAA,CAAC,UAAU,AAAC,EAAC,CAAC;cAC7B;AAAA,YACJ;AAAA,UACJ;AACA,iBAAO,CAAP,UAAQ,AAAC,CAAE;AAAE,iBAAO,CAAA,IAAG,OAAO,CAAE,CAAA,CAAC,IAAM,cAAY,CAAC;UAAE;AACtD,+BAAqB,CAArB,UAAuB,aAAY,CAAG;AAClC,AAAI,cAAA,CAAA,MAAK,EAAI,CAAA,IAAG,OAAO,CAAC;AACxB,AAAI,cAAA,CAAA,OAAM,EAAI,KAAG,CAAC;AAClB,AAAI,cAAA,CAAA,SAAQ,EAAI,MAAI,CAAC;AACrB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,MAAK,OAAO,CAAG,GAAE,CAAA,CAAG;AACpC,AAAI,gBAAA,CAAA,KAAI,EAAI,CAAA,MAAK,CAAE,CAAA,CAAC,CAAC;AACrB,AAAI,gBAAA,CAAA,aAAY,EAAI,CAAA,KAAI,cAAc,CAAC;AACvC,AAAI,gBAAA,CAAA,eAAc,EAAI,CAAA,aAAY,gBAAgB,CAAC;AACnD,AAAI,gBAAA,CAAA,MAAK,EAAI,CAAA,IAAG,OAAO,AAAC,CAAC,KAAI,CAAG,cAAY,CAAC,CAAC;AAC9C,iBAAI,SAAQ,AAAC,CAAC,MAAK,CAAC,CAAG;AACnB,mBAAG,0BAA0B,AAAC,CAAC,MAAK,CAAG,cAAY,CAAC,CAAC;AACrD,wBAAQ,EAAI,KAAG,CAAC;AAChB,sBAAM,EAAI,CAAA,IAAG,WAAW,AAAC,CAAC,aAAY,CAAG,OAAK,CAAG,QAAM,CAAC,CAAC;cAC7D;AAAA,AACA,iBAAI,KAAI,gBAAgB,CAAG;AACvB,mBAAI,SAAQ,AAAC,CAAC,OAAM,CAAC,CAAG;AACpB,qBAAG,iBAAiB,AAAC,CAAC,eAAc,eAAe,CAAC,SAAS,AAAC,CAAC,OAAM,CAAC,CAAC;AACvE,wBAAM,EAAI,KAAG,CAAC;gBAClB;AAAA,AACA,mBAAI,SAAQ,GAAK,CAAA,aAAY,wBAAwB,AAAC,EAAC,CAAG;AACtD,qBAAG,gBAAgB,AAAC,CAAC,eAAc,eAAe,CAAC,gBAAgB,AAAC,EAAC,CAAC;gBAC1E;AAAA,AACA,wBAAQ,EAAI,MAAI,CAAC;cACrB;AAAA,YACJ;AAAA,UACJ;AACA,6BAAmB,CAAnB,UAAoB,AAAC,CAAE;AACnB,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,IAAG,iBAAiB,CAAC;AAChC,gBAAS,GAAA,CAAA,CAAA,EAAI,CAAA,IAAG,OAAO,EAAI,EAAA,CAAG,CAAA,CAAA,GAAK,EAAA,CAAG,GAAE,CAAA,CAAG;AACvC,AAAI,gBAAA,CAAA,GAAE,EAAI,CAAA,IAAG,CAAE,CAAA,CAAC,CAAC;AACjB,iBAAI,GAAE,qBAAqB,CAAG;AAC1B,mBAAG,iBAAiB,AAAC,CAAC,GAAE,eAAe,CAAC,iBAAiB,AAAC,EAAC,CAAC;cAChE;AAAA,YACJ;AAAA,UACJ;AACA,kCAAwB,CAAxB,UAA0B,MAAK,CAAG,CAAA,aAAY,CAAG;AAC7C,eAAI,OAAM,AAAC,CAAC,aAAY,gBAAgB,CAAC,CAAG;AACxC,iBAAG,WAAW,gBAAgB,AAAC,CAAC,aAAY,CAAG,CAAA,MAAK,aAAa,CAAC,CAAC;YACvE,KACK;AACD,AAAI,gBAAA,CAAA,cAAa,EAAI,CAAA,aAAY,gBAAgB,eAAe,CAAC;AACjE,0BAAY,OAAO,AAAC,CAAC,IAAG,iBAAiB,AAAC,CAAC,cAAa,CAAC,CAAG,CAAA,MAAK,aAAa,CAAC,CAAC;YACpF;AAAA,UACJ;AACA,mBAAS,CAAT,UAAW,aAAY,CAAG,CAAA,MAAK,CAAG,CAAA,OAAM,CAAG;AACvC,eAAI,aAAY,aAAa,AAAC,EAAC,CAAG;AAC9B,mBAAO,CAAA,mBAAkB,UAAU,AAAC,CAAC,OAAM,CAAG,CAAA,aAAY,aAAa,CAAG,OAAK,CAAC,CAAC;YACrF,KACK;AACD,mBAAO,QAAM,CAAC;YAClB;AAAA,UACJ;AACA,yBAAe,CAAf,UAAiB,cAAa,CAAG;AAAE,iBAAO,CAAA,IAAG,WAAW,gBAAgB,AAAC,CAAC,cAAa,CAAC,CAAC;UAAE;AAC3F,wBAAc,CAAd,UAAgB,cAAa,CAAG;AAAE,iBAAO,CAAA,IAAG,WAAW,eAAe,AAAC,CAAC,cAAa,CAAC,CAAC;UAAE;AACzF,eAAK,CAAL,UAAO,KAAI,CAAG,CAAA,aAAY,CAAG;AACzB,cAAI;AACA,iBAAI,KAAI,KAAK,IAAM,iBAAe,CAAA,EAAK,CAAA,KAAI,KAAK,IAAM,yBAAuB,CAAG;AAC5E,qBAAO,CAAA,IAAG,WAAW,AAAC,CAAC,KAAI,CAAG,cAAY,CAAC,CAAC;cAChD,KACK;AACD,qBAAO,CAAA,IAAG,gBAAgB,AAAC,CAAC,KAAI,CAAG,cAAY,CAAC,CAAC;cACrD;AAAA,YACJ,CACA,OAAO,CAAA,CAAG;AACN,kBAAM,IAAI,qBAAmB,AAAC,CAAC,KAAI,CAAG,EAAA,CAAC,CAAC;YAC5C;AAAA,UACJ;AACA,wBAAc,CAAd,UAAgB,KAAI,CAAG,CAAA,aAAY,CAAG;AAClC,eAAI,IAAG,6BAA6B,AAAC,CAAC,KAAI,CAAC,CAAG;AAC1C,iBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,MAAI,CAAC,CAAC;AAC9B,mBAAO,KAAG,CAAC;YACf;AAAA,AACI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC;AACrC,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,oBAAoB,AAAC,CAAC,KAAI,CAAC,CAAC;AAC/C,eAAI,CAAC,MAAK,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAG;AAC/B,iBAAI,KAAI,cAAc,CAAG;AACrB,AAAI,kBAAA,CAAA,MAAK,EAAI,CAAA,mBAAkB,aAAa,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAC;AACnE,mBAAI,aAAY;AACZ,oCAAkB,cAAc,AAAC,CAAC,KAAI,CAAG,OAAK,CAAC,CAAC;AAAA,AACpD,mBAAG,WAAW,AAAC,CAAC,KAAI,CAAG,UAAQ,CAAC,CAAC;AACjC,mBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,KAAG,CAAC,CAAC;AAC7B,qBAAO,OAAK,CAAC;cACjB,KACK;AACD,mBAAG,WAAW,AAAC,CAAC,KAAI,CAAG,UAAQ,CAAC,CAAC;AACjC,mBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,KAAG,CAAC,CAAC;AAC7B,qBAAO,KAAG,CAAC;cACf;AAAA,YACJ,KACK;AACD,iBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,MAAI,CAAC,CAAC;AAC9B,mBAAO,KAAG,CAAC;YACf;AAAA,UACJ;AACA,4BAAkB,CAAlB,UAAoB,KAAI,CAAG;AACvB,mBAAQ,KAAI,KAAK;AACb,iBAAK,iBAAe;AAChB,qBAAO,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AAAA,AACnC,iBAAK,kBAAgB;AACjB,qBAAO,CAAA,KAAI,YAAY,CAAC;AAAA,AAC5B,iBAAK,qBAAmB;AACpB,AAAI,kBAAA,CAAA,OAAM,EAAI,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AACtC,qBAAO,CAAA,KAAI,YAAY,AAAC,CAAC,OAAM,CAAC,CAAC;AAAA,AACrC,iBAAK,kBAAgB;AACjB,qBAAO,CAAA,IAAG,OAAO,IAAI,AAAC,CAAC,KAAI,KAAK,CAAC,CAAC;AAAA,AACtC,iBAAK,0BAAwB;AACzB,AAAI,kBAAA,CAAA,OAAM,EAAI,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AACtC,AAAI,kBAAA,CAAA,IAAG,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC;AAChC,qBAAO,CAAA,KAAI,YAAY,AAAC,CAAC,OAAM,CAAG,KAAG,CAAC,CAAC;AAAA,AAC3C,iBAAK,yBAAuB;AACxB,AAAI,kBAAA,CAAA,GAAE,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAE,CAAA,CAAC,CAAC;AAClC,qBAAO,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAE,GAAE,CAAC,CAAC;AAAA,AACxC,iBAAK,2BAAyB;AAC1B,qBAAO,CAAA,eAAc,MAAM,AAAC,CAAC,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAG,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC,CAAC;AAAA,AACjF,iBAAK,wBAAsB,CAAC;AAC5B,iBAAK,yBAAuB;AACxB,qBAAO,CAAA,eAAc,MAAM,AAAC,CAAC,KAAI,YAAY,CAAG,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC,CAAC;AAAA,AAC1E;AACI,oBAAM,IAAI,cAAY,AAAC,EAAC,oBAAoB,EAAC,CAAA,KAAI,KAAK,EAAG,CAAC;AADvD,YAEX;UACJ;AACA,mBAAS,CAAT,UAAW,KAAI,CAAG,CAAA,aAAY,CAAG;AAC7B,AAAI,cAAA,CAAA,OAAM,EAAI,CAAA,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;AACtC,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,IAAG,SAAS,AAAC,CAAC,KAAI,CAAG,QAAM,CAAC,CAAC;AACxC,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC;AACrC,AAAI,cAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,OAAM,CAAC,CAAC;AACvC,eAAI,CAAC,MAAK,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAG;AAC/B,sBAAQ,EAAI,CAAA,mBAAkB,YAAY,AAAC,CAAC,SAAQ,CAAC,CAAC;AACtD,iBAAI,KAAI,cAAc,CAAG;AACrB,AAAI,kBAAA,CAAA,MAAK,EAAI,CAAA,mBAAkB,aAAa,AAAC,CAAC,SAAQ,CAAG,UAAQ,CAAC,CAAC;AACnE,mBAAI,aAAY;AACZ,oCAAkB,cAAc,AAAC,CAAC,KAAI,CAAG,OAAK,CAAC,CAAC;AAAA,AACpD,mBAAG,WAAW,AAAC,CAAC,KAAI,CAAG,UAAQ,CAAC,CAAC;AACjC,mBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,KAAG,CAAC,CAAC;AAC7B,qBAAO,OAAK,CAAC;cACjB,KACK;AACD,mBAAG,WAAW,AAAC,CAAC,KAAI,CAAG,UAAQ,CAAC,CAAC;AACjC,mBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,KAAG,CAAC,CAAC;AAC7B,qBAAO,KAAG,CAAC;cACf;AAAA,YACJ,KACK;AACD,iBAAG,YAAY,AAAC,CAAC,KAAI,CAAG,MAAI,CAAC,CAAC;AAC9B,mBAAO,KAAG,CAAC;YACf;AAAA,UACJ;AACA,iBAAO,CAAP,UAAS,KAAI,CAAG,CAAA,OAAM,CAAG;AACrB,AAAI,cAAA,CAAA,UAAS,EAAI,CAAA,IAAG,UAAU,AAAC,CAAC,KAAI,CAAC,CAAC;AACtC,eAAI,SAAQ,AAAC,CAAC,UAAS,CAAC,CAAA,EAAK,CAAA,UAAS,SAAS,AAAC,CAAC,OAAM,CAAC,CAAG;AACvD,mBAAO,WAAS,CAAC;YACrB;AAAA,AACA,eAAI,SAAQ,AAAC,CAAC,UAAS,CAAC,CAAG;AACvB,uBAAS,UAAU,AAAC,EAAC,CAAC;YAC1B;AAAA,AAMI,cAAA,CAAA,GAAE,EAAI,CAAA,KAAI,KAAK,IAAM,yBAAuB,CAAA,CAAI,CAAA,IAAG,IAAI,EAAI,KAAG,CAAC;AACnE,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,IAAG,aAAa,IAAI,AAAC,CAAC,KAAI,KAAK,CAAG,QAAM,CAAG,IAAE,CAAC,CAAC;AAC1D,eAAG,WAAW,AAAC,CAAC,KAAI,CAAG,KAAG,CAAC,CAAC;AAC5B,iBAAO,KAAG,CAAC;UACf;AACA,qBAAW,CAAX,UAAa,KAAI,CAAG;AAChB,eAAI,KAAI,aAAa,GAAK,EAAC,CAAA,CAAG;AAC1B,mBAAO,CAAA,IAAG,iBAAiB,AAAC,CAAC,KAAI,eAAe,CAAC,CAAC;YACtD,KACK;AACD,mBAAO,CAAA,IAAG,OAAO,CAAE,KAAI,aAAa,CAAC,CAAC;YAC1C;AAAA,AACA,iBAAO,CAAA,IAAG,OAAO,CAAE,KAAI,aAAa,CAAC,CAAC;UAC1C;AACA,kBAAQ,CAAR,UAAU,KAAI,CAAG;AAAE,iBAAO,CAAA,IAAG,OAAO,CAAE,KAAI,UAAU,CAAC,CAAC;UAAE;AACxD,mBAAS,CAAT,UAAW,KAAI,CAAG,CAAA,KAAI,CAAG;AAAE,eAAG,OAAO,CAAE,KAAI,UAAU,CAAC,EAAI,MAAI,CAAC;UAAE;AACjE,kBAAQ,CAAR,UAAU,KAAI,CAAG;AAAE,iBAAO,CAAA,IAAG,MAAM,CAAE,KAAI,UAAU,CAAC,CAAC;UAAE;AACvD,mBAAS,CAAT,UAAW,KAAI,CAAG,CAAA,KAAI,CAAG;AAAE,eAAG,MAAM,CAAE,KAAI,UAAU,CAAC,EAAI,MAAI,CAAC;UAAE;AAChE,oBAAU,CAAV,UAAY,KAAI,CAAG,CAAA,KAAI,CAAG;AAAE,eAAG,QAAQ,CAAE,KAAI,UAAU,CAAC,EAAI,MAAI,CAAC;UAAE;AACnE,qCAA2B,CAA3B,UAA6B,KAAI,CAAG;AAChC,iBAAO,CAAA,KAAI,eAAe,AAAC,EAAC,CAAA,EAAK,EAAC,IAAG,aAAa,AAAC,CAAC,KAAI,CAAC,CAAC;UAC9D;AACA,qBAAW,CAAX,UAAa,KAAI,CAAG;AAChB,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,KAAI,KAAK,CAAC;AACrB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,OAAO,CAAG,GAAE,CAAA,CAAG;AAClC,iBAAI,IAAG,QAAQ,CAAE,IAAG,CAAE,CAAA,CAAC,CAAC,CAAG;AACvB,qBAAO,KAAG,CAAC;cACf;AAAA,YACJ;AAAA,AACA,iBAAO,MAAI,CAAC;UAChB;AACA,kBAAQ,CAAR,UAAU,KAAI,CAAG;AACb,AAAI,cAAA,CAAA,GAAE,EAAI,CAAA,WAAU,gBAAgB,AAAC,CAAC,KAAI,KAAK,OAAO,CAAC,CAAC;AACxD,AAAI,cAAA,CAAA,IAAG,EAAI,CAAA,KAAI,KAAK,CAAC;AACrB,gBAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,IAAG,OAAO,CAAG,GAAE,CAAA,CAAG;AAClC,gBAAE,CAAE,CAAA,CAAC,EAAI,CAAA,IAAG,OAAO,CAAE,IAAG,CAAE,CAAA,CAAC,CAAC,CAAC;YACjC;AAAA,AACA,iBAAO,IAAE,CAAC;UACd;AAAA,aAtP8D,SAAO,CAAC,CAAC;MACnE,AAAC,CAMkC,sBAAqB,CANrC,CAJS,CAAA;AAApC,cAAQ,AAAC,gDAAqC,CAAA;IAEf;EAC3B,CAAA;AADI,CAAC,CAAC;AAkQwC","file":"src/change_detection/dynamic_change_detector.js","sourceRoot":"/Users/yamaguchi/Desktop/mean-edge/node_modules/angular2/es6/dev/","sourcesContent":["import { isPresent, isBlank, BaseException, FunctionWrapper } from 'angular2/src/facade/lang';\r\nimport { ListWrapper } from 'angular2/src/facade/collection';\r\nimport { AbstractChangeDetector } from './abstract_change_detector';\r\nimport { ChangeDetectionUtil, uninitialized } from './change_detection_util';\r\nimport { RECORD_TYPE_SELF, RECORD_TYPE_PROPERTY, RECORD_TYPE_LOCAL, RECORD_TYPE_INVOKE_METHOD, RECORD_TYPE_CONST, RECORD_TYPE_INVOKE_CLOSURE, RECORD_TYPE_PRIMITIVE_OP, RECORD_TYPE_KEYED_ACCESS, RECORD_TYPE_PIPE, RECORD_TYPE_BINDING_PIPE, RECORD_TYPE_INTERPOLATE } from './proto_record';\r\nimport { ChangeDetectionError } from './exceptions';\r\n// HACK: workaround for Traceur behavior.\r\n// It expects all transpiled modules to contain this marker.\r\n// TODO: remove this when we no longer use traceur\r\nexport var __esModule = true;\r\nexport class DynamicChangeDetector extends AbstractChangeDetector {\r\n    constructor(changeControlStrategy, dispatcher, pipeRegistry, protos, directiveRecords) {\r\n        super();\r\n        this.changeControlStrategy = changeControlStrategy;\r\n        this.dispatcher = dispatcher;\r\n        this.pipeRegistry = pipeRegistry;\r\n        this.protos = protos;\r\n        this.directiveRecords = directiveRecords;\r\n        this.values = ListWrapper.createFixedSize(protos.length + 1);\r\n        this.pipes = ListWrapper.createFixedSize(protos.length + 1);\r\n        this.prevContexts = ListWrapper.createFixedSize(protos.length + 1);\r\n        this.changes = ListWrapper.createFixedSize(protos.length + 1);\r\n        ListWrapper.fill(this.values, uninitialized);\r\n        ListWrapper.fill(this.pipes, null);\r\n        ListWrapper.fill(this.prevContexts, uninitialized);\r\n        ListWrapper.fill(this.changes, false);\r\n        this.locals = null;\r\n        this.directives = null;\r\n    }\r\n    hydrate(context, locals, directives) {\r\n        this.mode = ChangeDetectionUtil.changeDetectionMode(this.changeControlStrategy);\r\n        this.values[0] = context;\r\n        this.locals = locals;\r\n        this.directives = directives;\r\n    }\r\n    dehydrate() {\r\n        this._destroyPipes();\r\n        ListWrapper.fill(this.values, uninitialized);\r\n        ListWrapper.fill(this.changes, false);\r\n        ListWrapper.fill(this.pipes, null);\r\n        ListWrapper.fill(this.prevContexts, uninitialized);\r\n        this.locals = null;\r\n    }\r\n    _destroyPipes() {\r\n        for (var i = 0; i < this.pipes.length; ++i) {\r\n            if (isPresent(this.pipes[i])) {\r\n                this.pipes[i].onDestroy();\r\n            }\r\n        }\r\n    }\r\n    hydrated() { return this.values[0] !== uninitialized; }\r\n    detectChangesInRecords(throwOnChange) {\r\n        var protos = this.protos;\r\n        var changes = null;\r\n        var isChanged = false;\r\n        for (var i = 0; i < protos.length; ++i) {\r\n            var proto = protos[i];\r\n            var bindingRecord = proto.bindingRecord;\r\n            var directiveRecord = bindingRecord.directiveRecord;\r\n            var change = this._check(proto, throwOnChange);\r\n            if (isPresent(change)) {\r\n                this._updateDirectiveOrElement(change, bindingRecord);\r\n                isChanged = true;\r\n                changes = this._addChange(bindingRecord, change, changes);\r\n            }\r\n            if (proto.lastInDirective) {\r\n                if (isPresent(changes)) {\r\n                    this._getDirectiveFor(directiveRecord.directiveIndex).onChange(changes);\r\n                    changes = null;\r\n                }\r\n                if (isChanged && bindingRecord.isOnPushChangeDetection()) {\r\n                    this._getDetectorFor(directiveRecord.directiveIndex).markAsCheckOnce();\r\n                }\r\n                isChanged = false;\r\n            }\r\n        }\r\n    }\r\n    callOnAllChangesDone() {\r\n        var dirs = this.directiveRecords;\r\n        for (var i = dirs.length - 1; i >= 0; --i) {\r\n            var dir = dirs[i];\r\n            if (dir.callOnAllChangesDone) {\r\n                this._getDirectiveFor(dir.directiveIndex).onAllChangesDone();\r\n            }\r\n        }\r\n    }\r\n    _updateDirectiveOrElement(change, bindingRecord) {\r\n        if (isBlank(bindingRecord.directiveRecord)) {\r\n            this.dispatcher.notifyOnBinding(bindingRecord, change.currentValue);\r\n        }\r\n        else {\r\n            var directiveIndex = bindingRecord.directiveRecord.directiveIndex;\r\n            bindingRecord.setter(this._getDirectiveFor(directiveIndex), change.currentValue);\r\n        }\r\n    }\r\n    _addChange(bindingRecord, change, changes) {\r\n        if (bindingRecord.callOnChange()) {\r\n            return ChangeDetectionUtil.addChange(changes, bindingRecord.propertyName, change);\r\n        }\r\n        else {\r\n            return changes;\r\n        }\r\n    }\r\n    _getDirectiveFor(directiveIndex) { return this.directives.getDirectiveFor(directiveIndex); }\r\n    _getDetectorFor(directiveIndex) { return this.directives.getDetectorFor(directiveIndex); }\r\n    _check(proto, throwOnChange) {\r\n        try {\r\n            if (proto.mode === RECORD_TYPE_PIPE || proto.mode === RECORD_TYPE_BINDING_PIPE) {\r\n                return this._pipeCheck(proto, throwOnChange);\r\n            }\r\n            else {\r\n                return this._referenceCheck(proto, throwOnChange);\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw new ChangeDetectionError(proto, e);\r\n        }\r\n    }\r\n    _referenceCheck(proto, throwOnChange) {\r\n        if (this._pureFuncAndArgsDidNotChange(proto)) {\r\n            this._setChanged(proto, false);\r\n            return null;\r\n        }\r\n        var prevValue = this._readSelf(proto);\r\n        var currValue = this._calculateCurrValue(proto);\r\n        if (!isSame(prevValue, currValue)) {\r\n            if (proto.lastInBinding) {\r\n                var change = ChangeDetectionUtil.simpleChange(prevValue, currValue);\r\n                if (throwOnChange)\r\n                    ChangeDetectionUtil.throwOnChange(proto, change);\r\n                this._writeSelf(proto, currValue);\r\n                this._setChanged(proto, true);\r\n                return change;\r\n            }\r\n            else {\r\n                this._writeSelf(proto, currValue);\r\n                this._setChanged(proto, true);\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            this._setChanged(proto, false);\r\n            return null;\r\n        }\r\n    }\r\n    _calculateCurrValue(proto) {\r\n        switch (proto.mode) {\r\n            case RECORD_TYPE_SELF:\r\n                return this._readContext(proto);\r\n            case RECORD_TYPE_CONST:\r\n                return proto.funcOrValue;\r\n            case RECORD_TYPE_PROPERTY:\r\n                var context = this._readContext(proto);\r\n                return proto.funcOrValue(context);\r\n            case RECORD_TYPE_LOCAL:\r\n                return this.locals.get(proto.name);\r\n            case RECORD_TYPE_INVOKE_METHOD:\r\n                var context = this._readContext(proto);\r\n                var args = this._readArgs(proto);\r\n                return proto.funcOrValue(context, args);\r\n            case RECORD_TYPE_KEYED_ACCESS:\r\n                var arg = this._readArgs(proto)[0];\r\n                return this._readContext(proto)[arg];\r\n            case RECORD_TYPE_INVOKE_CLOSURE:\r\n                return FunctionWrapper.apply(this._readContext(proto), this._readArgs(proto));\r\n            case RECORD_TYPE_INTERPOLATE:\r\n            case RECORD_TYPE_PRIMITIVE_OP:\r\n                return FunctionWrapper.apply(proto.funcOrValue, this._readArgs(proto));\r\n            default:\r\n                throw new BaseException(`Unknown operation ${proto.mode}`);\r\n        }\r\n    }\r\n    _pipeCheck(proto, throwOnChange) {\r\n        var context = this._readContext(proto);\r\n        var pipe = this._pipeFor(proto, context);\r\n        var prevValue = this._readSelf(proto);\r\n        var currValue = pipe.transform(context);\r\n        if (!isSame(prevValue, currValue)) {\r\n            currValue = ChangeDetectionUtil.unwrapValue(currValue);\r\n            if (proto.lastInBinding) {\r\n                var change = ChangeDetectionUtil.simpleChange(prevValue, currValue);\r\n                if (throwOnChange)\r\n                    ChangeDetectionUtil.throwOnChange(proto, change);\r\n                this._writeSelf(proto, currValue);\r\n                this._setChanged(proto, true);\r\n                return change;\r\n            }\r\n            else {\r\n                this._writeSelf(proto, currValue);\r\n                this._setChanged(proto, true);\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            this._setChanged(proto, false);\r\n            return null;\r\n        }\r\n    }\r\n    _pipeFor(proto, context) {\r\n        var storedPipe = this._readPipe(proto);\r\n        if (isPresent(storedPipe) && storedPipe.supports(context)) {\r\n            return storedPipe;\r\n        }\r\n        if (isPresent(storedPipe)) {\r\n            storedPipe.onDestroy();\r\n        }\r\n        // Currently, only pipes that used in bindings in the template get\r\n        // the changeDetectorRef of the encompassing component.\r\n        //\r\n        // In the future, pipes declared in the bind configuration should\r\n        // be able to access the changeDetectorRef of that component.\r\n        var cdr = proto.mode === RECORD_TYPE_BINDING_PIPE ? this.ref : null;\r\n        var pipe = this.pipeRegistry.get(proto.name, context, cdr);\r\n        this._writePipe(proto, pipe);\r\n        return pipe;\r\n    }\r\n    _readContext(proto) {\r\n        if (proto.contextIndex == -1) {\r\n            return this._getDirectiveFor(proto.directiveIndex);\r\n        }\r\n        else {\r\n            return this.values[proto.contextIndex];\r\n        }\r\n        return this.values[proto.contextIndex];\r\n    }\r\n    _readSelf(proto) { return this.values[proto.selfIndex]; }\r\n    _writeSelf(proto, value) { this.values[proto.selfIndex] = value; }\r\n    _readPipe(proto) { return this.pipes[proto.selfIndex]; }\r\n    _writePipe(proto, value) { this.pipes[proto.selfIndex] = value; }\r\n    _setChanged(proto, value) { this.changes[proto.selfIndex] = value; }\r\n    _pureFuncAndArgsDidNotChange(proto) {\r\n        return proto.isPureFunction() && !this._argsChanged(proto);\r\n    }\r\n    _argsChanged(proto) {\r\n        var args = proto.args;\r\n        for (var i = 0; i < args.length; ++i) {\r\n            if (this.changes[args[i]]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _readArgs(proto) {\r\n        var res = ListWrapper.createFixedSize(proto.args.length);\r\n        var args = proto.args;\r\n        for (var i = 0; i < args.length; ++i) {\r\n            res[i] = this.values[args[i]];\r\n        }\r\n        return res;\r\n    }\r\n}\r\nfunction isSame(a, b) {\r\n    if (a === b)\r\n        return true;\r\n    if (a instanceof String && b instanceof String && a == b)\r\n        return true;\r\n    if ((a !== a) && (b !== b))\r\n        return true;\r\n    return false;\r\n}\r\n//# sourceMappingURL=dynamic_change_detector.js.map"]}