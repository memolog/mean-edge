{"version":3,"sources":["observable_pipe.js"],"names":[],"mappings":"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","file":"src/change_detection/pipes/observable_pipe.js","sourceRoot":"/Users/yamaguchi/Desktop/mean-edge/node_modules/angular2/es6/dev/","sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") return Reflect.decorate(decorators, target, key, desc);\r\n    switch (arguments.length) {\r\n        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);\r\n        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);\r\n        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);\r\n    }\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nimport { ObservableWrapper } from 'angular2/src/facade/async';\r\nimport { isBlank, isPresent, CONST } from 'angular2/src/facade/lang';\r\nimport { Pipe, WrappedValue, PipeFactory } from './pipe';\r\n// HACK: workaround for Traceur behavior.\r\n// It expects all transpiled modules to contain this marker.\r\n// TODO: remove this when we no longer use traceur\r\nexport var __esModule = true;\r\n/**\r\n * Implements async bindings to Observable.\r\n *\r\n * # Example\r\n *\r\n * In this example we bind the description observable to the DOM. The async pipe will convert an\r\n *observable to the\r\n * latest value it emitted. It will also request a change detection check when a new value is\r\n *emitted.\r\n *\r\n *  ```\r\n * @Component({\r\n *   selector: \"task-cmp\",\r\n *   changeDetection: ON_PUSH\r\n * })\r\n * @View({\r\n *  inline: \"Task Description {{description|async}}\"\r\n * })\r\n * class Task {\r\n *  description:Observable<string>;\r\n * }\r\n *\r\n * ```\r\n *\r\n * @exportedAs angular2/pipes\r\n */\r\nexport class ObservablePipe extends Pipe {\r\n    constructor(ref) {\r\n        super();\r\n        this._ref = ref;\r\n        this._latestValue = null;\r\n        this._latestReturnedValue = null;\r\n        this._subscription = null;\r\n        this._observable = null;\r\n    }\r\n    supports(obs) { return ObservableWrapper.isObservable(obs); }\r\n    onDestroy() {\r\n        if (isPresent(this._subscription)) {\r\n            this._dispose();\r\n        }\r\n    }\r\n    transform(obs) {\r\n        if (isBlank(this._subscription)) {\r\n            this._subscribe(obs);\r\n            return null;\r\n        }\r\n        if (obs !== this._observable) {\r\n            this._dispose();\r\n            return this.transform(obs);\r\n        }\r\n        if (this._latestValue === this._latestReturnedValue) {\r\n            return this._latestReturnedValue;\r\n        }\r\n        else {\r\n            this._latestReturnedValue = this._latestValue;\r\n            return WrappedValue.wrap(this._latestValue);\r\n        }\r\n    }\r\n    _subscribe(obs) {\r\n        this._observable = obs;\r\n        this._subscription = ObservableWrapper.subscribe(obs, value => { this._updateLatestValue(value); }, e => { throw e; });\r\n    }\r\n    _dispose() {\r\n        ObservableWrapper.dispose(this._subscription);\r\n        this._latestValue = null;\r\n        this._latestReturnedValue = null;\r\n        this._subscription = null;\r\n        this._observable = null;\r\n    }\r\n    _updateLatestValue(value) {\r\n        this._latestValue = value;\r\n        this._ref.requestCheck();\r\n    }\r\n}\r\n/**\r\n * Provides a factory for [ObervablePipe].\r\n *\r\n * @exportedAs angular2/pipes\r\n */\r\nexport let ObservablePipeFactory = class extends PipeFactory {\r\n    constructor() {\r\n        super();\r\n    }\r\n    supports(obs) { return ObservableWrapper.isObservable(obs); }\r\n    create(cdRef) { return new ObservablePipe(cdRef); }\r\n};\r\nObservablePipeFactory = __decorate([\r\n    CONST(), \r\n    __metadata('design:paramtypes', [])\r\n], ObservablePipeFactory);\r\n//# sourceMappingURL=observable_pipe.js.map"]}