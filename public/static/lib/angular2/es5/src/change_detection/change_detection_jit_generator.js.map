{"version":3,"sources":["change_detection_jit_generator.js"],"names":[],"mappings":"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","file":"src/change_detection/change_detection_jit_generator.js","sourceRoot":"/Users/yamaguchi/Desktop/mean-edge/node_modules/angular2/es6/dev/","sourcesContent":["import { BaseException } from 'angular2/src/facade/lang';\r\nimport { AbstractChangeDetector } from './abstract_change_detector';\r\nimport { ChangeDetectionUtil } from './change_detection_util';\r\nimport { RECORD_TYPE_SELF, RECORD_TYPE_PROPERTY, RECORD_TYPE_LOCAL, RECORD_TYPE_INVOKE_METHOD, RECORD_TYPE_CONST, RECORD_TYPE_INVOKE_CLOSURE, RECORD_TYPE_PRIMITIVE_OP, RECORD_TYPE_KEYED_ACCESS, RECORD_TYPE_PIPE, RECORD_TYPE_BINDING_PIPE, RECORD_TYPE_INTERPOLATE } from './proto_record';\r\n// HACK: workaround for Traceur behavior.\r\n// It expects all transpiled modules to contain this marker.\r\n// TODO: remove this when we no longer use traceur\r\nexport var __esModule = true;\r\n/**\r\n * The code generator takes a list of proto records and creates a function/class\r\n * that \"emulates\" what the developer would write by hand to implement the same\r\n * kind of behaviour.\r\n *\r\n * The implementation comprises two parts:\r\n * * ChangeDetectorJITGenerator has the logic of how everything fits together.\r\n * * template functions (e.g., constructorTemplate) define what code is generated.\r\n*/\r\nvar ABSTRACT_CHANGE_DETECTOR = \"AbstractChangeDetector\";\r\nvar UTIL = \"ChangeDetectionUtil\";\r\nvar DISPATCHER_ACCESSOR = \"this.dispatcher\";\r\nvar PIPE_REGISTRY_ACCESSOR = \"this.pipeRegistry\";\r\nvar PROTOS_ACCESSOR = \"this.protos\";\r\nvar DIRECTIVES_ACCESSOR = \"this.directiveRecords\";\r\nvar CONTEXT_ACCESSOR = \"this.context\";\r\nvar IS_CHANGED_LOCAL = \"isChanged\";\r\nvar CHANGES_LOCAL = \"changes\";\r\nvar LOCALS_ACCESSOR = \"this.locals\";\r\nvar MODE_ACCESSOR = \"this.mode\";\r\nvar TEMP_LOCAL = \"temp\";\r\nvar CURRENT_PROTO = \"currentProto\";\r\nfunction typeTemplate(type, cons, detectChanges, notifyOnAllChangesDone, setContext) {\r\n    return `\n${cons}\n${detectChanges}\n${notifyOnAllChangesDone}\n${setContext};\n\nreturn function(dispatcher, pipeRegistry) {\n  return new ${type}(dispatcher, pipeRegistry, protos, directiveRecords);\n}\n`;\r\n}\r\nfunction constructorTemplate(type, fieldsDefinitions) {\r\n    return `\nvar ${type} = function ${type}(dispatcher, pipeRegistry, protos, directiveRecords) {\n${ABSTRACT_CHANGE_DETECTOR}.call(this);\n${DISPATCHER_ACCESSOR} = dispatcher;\n${PIPE_REGISTRY_ACCESSOR} = pipeRegistry;\n${PROTOS_ACCESSOR} = protos;\n${DIRECTIVES_ACCESSOR} = directiveRecords;\n${LOCALS_ACCESSOR} = null;\n${fieldsDefinitions}\n}\n\n${type}.prototype = Object.create(${ABSTRACT_CHANGE_DETECTOR}.prototype);\n`;\r\n}\r\nfunction pipeOnDestroyTemplate(pipeNames) {\r\n    return pipeNames.map((p) => `${p}.onDestroy()`).join(\"\\n\");\r\n}\r\nfunction hydrateTemplate(type, mode, fieldDefinitions, pipeOnDestroy, directiveFieldNames, detectorFieldNames) {\r\n    var directiveInit = \"\";\r\n    for (var i = 0; i < directiveFieldNames.length; ++i) {\r\n        directiveInit +=\r\n            `${directiveFieldNames[i]} = directives.getDirectiveFor(this.directiveRecords[${i}].directiveIndex);\\n`;\r\n    }\r\n    var detectorInit = \"\";\r\n    for (var i = 0; i < detectorFieldNames.length; ++i) {\r\n        detectorInit +=\r\n            `${detectorFieldNames[i]} = directives.getDetectorFor(this.directiveRecords[${i}].directiveIndex);\\n`;\r\n    }\r\n    return `\n${type}.prototype.hydrate = function(context, locals, directives) {\n  ${MODE_ACCESSOR} = \"${mode}\";\n  ${CONTEXT_ACCESSOR} = context;\n  ${LOCALS_ACCESSOR} = locals;\n  ${directiveInit}\n  ${detectorInit}\n}\n${type}.prototype.dehydrate = function() {\n  ${pipeOnDestroy}\n  ${fieldDefinitions}\n  ${LOCALS_ACCESSOR} = null;\n}\n${type}.prototype.hydrated = function() {\n  return ${CONTEXT_ACCESSOR} !== ${UTIL}.unitialized();\n}\n`;\r\n}\r\nfunction detectChangesTemplate(type, body) {\r\n    return `\n${type}.prototype.detectChangesInRecords = function(throwOnChange) {\n  ${body}\n}\n`;\r\n}\r\nfunction callOnAllChangesDoneTemplate(type, body) {\r\n    return `\n${type}.prototype.callOnAllChangesDone = function() {\n  ${body}\n}\n`;\r\n}\r\nfunction onAllChangesDoneTemplate(directive) {\r\n    return `${directive}.onAllChangesDone();`;\r\n}\r\nfunction detectChangesBodyTemplate(localDefinitions, changeDefinitions, records) {\r\n    return `\n${localDefinitions}\n${changeDefinitions}\nvar ${TEMP_LOCAL};\nvar ${IS_CHANGED_LOCAL} = false;\nvar ${CURRENT_PROTO};\nvar ${CHANGES_LOCAL} = null;\n\ncontext = ${CONTEXT_ACCESSOR};\n${records}\n`;\r\n}\r\nfunction pipeCheckTemplate(protoIndex, context, bindingPropagationConfig, pipe, pipeType, oldValue, newValue, change, update, addToChanges, lastInDirective) {\r\n    return `\n${CURRENT_PROTO} = ${PROTOS_ACCESSOR}[${protoIndex}];\nif (${pipe} === ${UTIL}.unitialized()) {\n  ${pipe} = ${PIPE_REGISTRY_ACCESSOR}.get('${pipeType}', ${context}, ${bindingPropagationConfig});\n} else if (!${pipe}.supports(${context})) {\n  ${pipe}.onDestroy();\n  ${pipe} = ${PIPE_REGISTRY_ACCESSOR}.get('${pipeType}', ${context}, ${bindingPropagationConfig});\n}\n\n${newValue} = ${pipe}.transform(${context});\nif (${oldValue} !== ${newValue}) {\n  ${newValue} = ${UTIL}.unwrapValue(${newValue});\n  ${change} = true;\n  ${update}\n  ${addToChanges}\n  ${oldValue} = ${newValue};\n}\n${lastInDirective}\n`;\r\n}\r\nfunction referenceCheckTemplate(protoIndex, assignment, oldValue, newValue, change, update, addToChanges, lastInDirective) {\r\n    return `\n${CURRENT_PROTO} = ${PROTOS_ACCESSOR}[${protoIndex}];\n${assignment}\nif (${newValue} !== ${oldValue} || (${newValue} !== ${newValue}) && (${oldValue} !== ${oldValue})) {\n  ${change} = true;\n  ${update}\n  ${addToChanges}\n  ${oldValue} = ${newValue};\n}\n${lastInDirective}\n`;\r\n}\r\nfunction assignmentTemplate(field, value) {\r\n    return `${field} = ${value};`;\r\n}\r\nfunction localDefinitionsTemplate(names) {\r\n    return names.map((n) => `var ${n};`).join(\"\\n\");\r\n}\r\nfunction changeDefinitionsTemplate(names) {\r\n    return names.map((n) => `var ${n} = false;`).join(\"\\n\");\r\n}\r\nfunction fieldDefinitionsTemplate(names) {\r\n    return names.map((n) => `${n} = ${UTIL}.unitialized();`).join(\"\\n\");\r\n}\r\nfunction ifChangedGuardTemplate(changeNames, body) {\r\n    var cond = changeNames.join(\" || \");\r\n    return `\nif (${cond}) {\n  ${body}\n}\n`;\r\n}\r\nfunction addToChangesTemplate(oldValue, newValue) {\r\n    return `${CHANGES_LOCAL} = ${UTIL}.addChange(${CHANGES_LOCAL}, ${CURRENT_PROTO}.bindingRecord.propertyName, ${UTIL}.simpleChange(${oldValue}, ${newValue}));`;\r\n}\r\nfunction updateDirectiveTemplate(oldValue, newValue, directiveProperty) {\r\n    return `\nif(throwOnChange) ${UTIL}.throwOnChange(${CURRENT_PROTO}, ${UTIL}.simpleChange(${oldValue}, ${newValue}));\n${directiveProperty} = ${newValue};\n${IS_CHANGED_LOCAL} = true;\n  `;\r\n}\r\nfunction updateElementTemplate(oldValue, newValue) {\r\n    return `\nif(throwOnChange) ${UTIL}.throwOnChange(${CURRENT_PROTO}, ${UTIL}.simpleChange(${oldValue}, ${newValue}));\n${DISPATCHER_ACCESSOR}.notifyOnBinding(${CURRENT_PROTO}.bindingRecord, ${newValue});\n  `;\r\n}\r\nfunction notifyOnChangesTemplate(directive) {\r\n    return `\nif(${CHANGES_LOCAL}) {\n  ${directive}.onChange(${CHANGES_LOCAL});\n  ${CHANGES_LOCAL} = null;\n}\n`;\r\n}\r\nfunction notifyOnPushDetectorsTemplate(detector) {\r\n    return `\nif(${IS_CHANGED_LOCAL}) {\n  ${detector}.markAsCheckOnce();\n}\n`;\r\n}\r\nfunction lastInDirectiveTemplate(notifyOnChanges, notifyOnPush) {\r\n    return `\n${notifyOnChanges}\n${notifyOnPush}\n${IS_CHANGED_LOCAL} = false;\n`;\r\n}\r\nexport class ChangeDetectorJITGenerator {\r\n    constructor(typeName, changeDetectionStrategy, records, directiveRecords) {\r\n        this.typeName = typeName;\r\n        this.changeDetectionStrategy = changeDetectionStrategy;\r\n        this.records = records;\r\n        this.directiveRecords = directiveRecords;\r\n        this.localNames = this.getLocalNames(records);\r\n        this.changeNames = this.getChangeNames(this.localNames);\r\n        this.fieldNames = this.getFieldNames(this.localNames);\r\n        this.pipeNames = this.getPipeNames(this.localNames);\r\n    }\r\n    getLocalNames(records) {\r\n        var index = 0;\r\n        var names = records.map((r) => {\r\n            var sanitizedName = r.name.replace(new RegExp(\"\\\\W\", \"g\"), '');\r\n            return `${sanitizedName}${index++}`;\r\n        });\r\n        return [\"context\"].concat(names);\r\n    }\r\n    getChangeNames(localNames) {\r\n        return localNames.map((n) => `change_${n}`);\r\n    }\r\n    getFieldNames(localNames) {\r\n        return localNames.map((n) => `this.${n}`);\r\n    }\r\n    getPipeNames(localNames) {\r\n        return localNames.map((n) => `this.${n}_pipe`);\r\n    }\r\n    generate() {\r\n        var text = typeTemplate(this.typeName, this.genConstructor(), this.genDetectChanges(), this.genCallOnAllChangesDone(), this.genHydrate());\r\n        return new Function('AbstractChangeDetector', 'ChangeDetectionUtil', 'protos', 'directiveRecords', text)(AbstractChangeDetector, ChangeDetectionUtil, this.records, this.directiveRecords);\r\n    }\r\n    genConstructor() {\r\n        return constructorTemplate(this.typeName, this.genFieldDefinitions());\r\n    }\r\n    genHydrate() {\r\n        var mode = ChangeDetectionUtil.changeDetectionMode(this.changeDetectionStrategy);\r\n        return hydrateTemplate(this.typeName, mode, this.genFieldDefinitions(), pipeOnDestroyTemplate(this.getNonNullPipeNames()), this.getDirectiveFieldNames(), this.getDetectorFieldNames());\r\n    }\r\n    getDirectiveFieldNames() {\r\n        return this.directiveRecords.map((d) => this.getDirective(d.directiveIndex));\r\n    }\r\n    getDetectorFieldNames() {\r\n        return this.directiveRecords.filter(r => r.isOnPushChangeDetection())\r\n            .map((d) => this.getDetector(d.directiveIndex));\r\n    }\r\n    getDirective(d) { return `this.directive_${d.name}`; }\r\n    getDetector(d) { return `this.detector_${d.name}`; }\r\n    genFieldDefinitions() {\r\n        var fields = [];\r\n        fields = fields.concat(this.fieldNames);\r\n        fields = fields.concat(this.getNonNullPipeNames());\r\n        fields = fields.concat(this.getDirectiveFieldNames());\r\n        fields = fields.concat(this.getDetectorFieldNames());\r\n        return fieldDefinitionsTemplate(fields);\r\n    }\r\n    getNonNullPipeNames() {\r\n        var pipes = [];\r\n        this.records.forEach((r) => {\r\n            if (r.mode === RECORD_TYPE_PIPE || r.mode === RECORD_TYPE_BINDING_PIPE) {\r\n                pipes.push(this.pipeNames[r.selfIndex]);\r\n            }\r\n        });\r\n        return pipes;\r\n    }\r\n    genDetectChanges() {\r\n        var body = this.genDetectChangesBody();\r\n        return detectChangesTemplate(this.typeName, body);\r\n    }\r\n    genCallOnAllChangesDone() {\r\n        var notifications = [];\r\n        var dirs = this.directiveRecords;\r\n        for (var i = dirs.length - 1; i >= 0; --i) {\r\n            var dir = dirs[i];\r\n            if (dir.callOnAllChangesDone) {\r\n                var directive = `this.directive_${dir.directiveIndex.name}`;\r\n                notifications.push(onAllChangesDoneTemplate(directive));\r\n            }\r\n        }\r\n        return callOnAllChangesDoneTemplate(this.typeName, notifications.join(\";\\n\"));\r\n    }\r\n    genDetectChangesBody() {\r\n        var rec = this.records.map((r) => this.genRecord(r)).join(\"\\n\");\r\n        return detectChangesBodyTemplate(this.genLocalDefinitions(), this.genChangeDefinitions(), rec);\r\n    }\r\n    genLocalDefinitions() { return localDefinitionsTemplate(this.localNames); }\r\n    genChangeDefinitions() { return changeDefinitionsTemplate(this.changeNames); }\r\n    genRecord(r) {\r\n        if (r.mode === RECORD_TYPE_PIPE || r.mode === RECORD_TYPE_BINDING_PIPE) {\r\n            return this.genPipeCheck(r);\r\n        }\r\n        else {\r\n            return this.genReferenceCheck(r);\r\n        }\r\n    }\r\n    genPipeCheck(r) {\r\n        var context = this.localNames[r.contextIndex];\r\n        var oldValue = this.fieldNames[r.selfIndex];\r\n        var newValue = this.localNames[r.selfIndex];\r\n        var change = this.changeNames[r.selfIndex];\r\n        var pipe = this.pipeNames[r.selfIndex];\r\n        var cdRef = r.mode === RECORD_TYPE_BINDING_PIPE ? \"this.ref\" : \"null\";\r\n        var update = this.genUpdateDirectiveOrElement(r);\r\n        var addToChanges = this.genAddToChanges(r);\r\n        var lastInDirective = this.genLastInDirective(r);\r\n        return pipeCheckTemplate(r.selfIndex - 1, context, cdRef, pipe, r.name, oldValue, newValue, change, update, addToChanges, lastInDirective);\r\n    }\r\n    genReferenceCheck(r) {\r\n        var oldValue = this.fieldNames[r.selfIndex];\r\n        var newValue = this.localNames[r.selfIndex];\r\n        var change = this.changeNames[r.selfIndex];\r\n        var assignment = this.genUpdateCurrentValue(r);\r\n        var update = this.genUpdateDirectiveOrElement(r);\r\n        var addToChanges = this.genAddToChanges(r);\r\n        var lastInDirective = this.genLastInDirective(r);\r\n        var check = referenceCheckTemplate(r.selfIndex - 1, assignment, oldValue, newValue, change, update, addToChanges, lastInDirective);\r\n        if (r.isPureFunction()) {\r\n            return this.ifChangedGuard(r, check);\r\n        }\r\n        else {\r\n            return check;\r\n        }\r\n    }\r\n    genUpdateCurrentValue(r) {\r\n        var context = this.getContext(r);\r\n        var newValue = this.localNames[r.selfIndex];\r\n        var args = this.genArgs(r);\r\n        switch (r.mode) {\r\n            case RECORD_TYPE_SELF:\r\n                return assignmentTemplate(newValue, context);\r\n            case RECORD_TYPE_CONST:\r\n                return `${newValue} = ${this.genLiteral(r.funcOrValue)}`;\r\n            case RECORD_TYPE_PROPERTY:\r\n                return assignmentTemplate(newValue, `${context}.${r.name}`);\r\n            case RECORD_TYPE_LOCAL:\r\n                return assignmentTemplate(newValue, `${LOCALS_ACCESSOR}.get('${r.name}')`);\r\n            case RECORD_TYPE_INVOKE_METHOD:\r\n                return assignmentTemplate(newValue, `${context}.${r.name}(${args})`);\r\n            case RECORD_TYPE_INVOKE_CLOSURE:\r\n                return assignmentTemplate(newValue, `${context}(${args})`);\r\n            case RECORD_TYPE_PRIMITIVE_OP:\r\n                return assignmentTemplate(newValue, `${UTIL}.${r.name}(${args})`);\r\n            case RECORD_TYPE_INTERPOLATE:\r\n                return assignmentTemplate(newValue, this.genInterpolation(r));\r\n            case RECORD_TYPE_KEYED_ACCESS:\r\n                var key = this.localNames[r.args[0]];\r\n                return assignmentTemplate(newValue, `${context}[${key}]`);\r\n            default:\r\n                throw new BaseException(`Unknown operation ${r.mode}`);\r\n        }\r\n    }\r\n    getContext(r) {\r\n        if (r.contextIndex == -1) {\r\n            return this.getDirective(r.directiveIndex);\r\n        }\r\n        else {\r\n            return this.localNames[r.contextIndex];\r\n        }\r\n    }\r\n    ifChangedGuard(r, body) {\r\n        return ifChangedGuardTemplate(r.args.map((a) => this.changeNames[a]), body);\r\n    }\r\n    genInterpolation(r) {\r\n        var res = \"\";\r\n        for (var i = 0; i < r.args.length; ++i) {\r\n            res += this.genLiteral(r.fixedArgs[i]);\r\n            res += \" + \";\r\n            res += this.localNames[r.args[i]];\r\n            res += \" + \";\r\n        }\r\n        res += this.genLiteral(r.fixedArgs[r.args.length]);\r\n        return res;\r\n    }\r\n    genLiteral(value) { return JSON.stringify(value); }\r\n    genUpdateDirectiveOrElement(r) {\r\n        if (!r.lastInBinding)\r\n            return \"\";\r\n        var newValue = this.localNames[r.selfIndex];\r\n        var oldValue = this.fieldNames[r.selfIndex];\r\n        var br = r.bindingRecord;\r\n        if (br.isDirective()) {\r\n            var directiveProperty = `${this.getDirective(br.directiveRecord.directiveIndex)}.${br.propertyName}`;\r\n            return updateDirectiveTemplate(oldValue, newValue, directiveProperty);\r\n        }\r\n        else {\r\n            return updateElementTemplate(oldValue, newValue);\r\n        }\r\n    }\r\n    genAddToChanges(r) {\r\n        var newValue = this.localNames[r.selfIndex];\r\n        var oldValue = this.fieldNames[r.selfIndex];\r\n        return r.bindingRecord.callOnChange() ? addToChangesTemplate(oldValue, newValue) : \"\";\r\n    }\r\n    genLastInDirective(r) {\r\n        var onChanges = this.genNotifyOnChanges(r);\r\n        var onPush = this.genNotifyOnPushDetectors(r);\r\n        return lastInDirectiveTemplate(onChanges, onPush);\r\n    }\r\n    genNotifyOnChanges(r) {\r\n        var br = r.bindingRecord;\r\n        if (r.lastInDirective && br.callOnChange()) {\r\n            return notifyOnChangesTemplate(this.getDirective(br.directiveRecord.directiveIndex));\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    }\r\n    genNotifyOnPushDetectors(r) {\r\n        var br = r.bindingRecord;\r\n        if (r.lastInDirective && br.isOnPushChangeDetection()) {\r\n            return notifyOnPushDetectorsTemplate(this.getDetector(br.directiveRecord.directiveIndex));\r\n        }\r\n        else {\r\n            return \"\";\r\n        }\r\n    }\r\n    genArgs(r) { return r.args.map((arg) => this.localNames[arg]).join(\", \"); }\r\n}\r\n//# sourceMappingURL=change_detection_jit_generator.js.map"]}